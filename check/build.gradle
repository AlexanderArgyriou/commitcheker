plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.2.0'
}

group 'com.argyriou'
version '2.0'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
/*
   this refers to the intellij version which the sandbox vm will run to operations like runIde for debugging an instance of intellij
   with your plugin loaded, higher versions maybe have problems with CVS plugin.
*/
intellij {
    pluginName = "Commit Checker"
    version = System.getenv().getOrDefault("IJ_VERSION", "2020.3.1")
    downloadSources = true
    updateSinceUntilBuild = false
//    updateSinceUntilBuild = true
//    plugins = []
}

//runIde {
//    jbrVersion = "11.0.9.1+11-b1145.63"
//}

//'11.0.9.1+11-b1145.63'

patchPluginXml {
    sinceBuild = '162'
    pluginDescription = '''
        <h1>Check a lofu commit</h1>
    '''
}

test {
    useJUnitPlatform()
}